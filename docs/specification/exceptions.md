# Винятки та помилки

У кожній мові програмування виникають ситуації, коли щось йде не так: невірні дані, проблеми з файлами, помилки у мережевих запитах тощо. Для обробки таких ситуацій використовуються винятки.

## Синтаксичні помилки

Синтаксичні помилки виникають, коли код не відповідає граматичним правилам мови програмування. Вони можуть бути викликані помилками у структурі коду, невірно написаними ключовими словами, неправильним використанням операторів тощо. Такі помилки виявляються ще до виконання програми і є першими помилками, з якими може стикнутись користувач.

``` periwinkle
якщо змінна = 42
    друкр("Привіт, Світ!")
кінець
```

``` console linenums="0"
$ барвінок приклад.бр
Синтаксична помилка: Неправильний синтаксис. (знайдено на 1 рядку)
    якщо змінна = 42
    ^
```

## Винятки

Навіть якщо програма написана синтаксично правильно, можуть виникати помилки під час її виконання. Такі помилки називаються винятками. Винятки дозволяють програмі реагувати на непередбачувані ситуації, такі як ділення на нуль, звернення до неіснуючого файлу або проблеми з мережею.

``` periwinkle
а = 10
б = 0
друкр(а / б)
```

``` console linenums="0"
$ барвінок приклад.бр
ПомилкаДіленняНаНуль: Ділення на нуль
    "приклад.бр" на лінії 3
        друкр(а / б)
```

## Обробка винятків

Цей розділ пояснює, як обробляти винятки, щоб забезпечити коректну роботу програм навіть у випадку помилок.

### Конструкція спробувати-обробити

Конструкція `спробувати-обробити` використовується для перехоплення і обробки винятків, які виникають у блоці коду. Синтаксис виглядає наступним чином:

``` periwinkle linenums="0"
спробувати
    ! Код, який може викликати виняток
обробити ТипВинятку
    друк("Виняток оброблений")
обробити ТипВинятку як виняток
    ! За допомогою оператора 'як' об'єкт помилки присвоюється змінній
    друкр("Текст винятку:", виняток)
наприкінці
    друкр("Кінець оброки")
кінець
```

Приклад оброблення помилки ділення на нуль:

``` periwinkle linenums="0"
спробувати
    а = 10
    б = 0
    друкр(а / б)
обробити ПомилкаДіленняНаНуль
    друкр("Помилка: ділення на нуль")
кінець
```

``` console linenums="0"
$ барвінок приклад.бр
Помилка: ділення на нуль
```

Блок `#!periwinkle наприкінці` використовується для виконання коду, який має бути виконаний незалежно від того, чи виник виняток. Це корисно для очищення ресурсів або завершення операцій.

``` periwinkle linenums="0"
спробувати
    ! Код, який може викликати виняток
обробити ТипВинятку
    друкр("Виникла помилка")
наприкінці
    ! Код, який виконується завжди
    очиститиРесурси()
кінець
```

!!! warning "Зверніть увагу"
    Якщо виняток був згенерований у блоці обробки, то він замінить оброблюваний виняток. Після цього виконання перейде в блок наприкінці, якщо він існує, а потім цей виняток буде розповсюджений далі.
!!! warning "Зверніть увагу"
    Якщо виняток був згенерований у блоці `#!periwinkle наприкінці`, то виконання коду в цьому блоці буде завершене, та виняток буде розповсюджений далі.

## Клас Виняток

Клас Виняток має конструктор, який приймає лише один аргумент — рядок, що представляє текст повідомлення помилки. У цьому класі також перевантажений оператор перетворення до рядка, який повертає повідомлення, передане в конструкторі:

``` periwinkle linenums="0"
помилка = ПомилкаІмені("Повідомлення")
друкр(помилка) ! Виведе: "Помилка"
```

## Виклик винятків

Ви можете викликати винятки за допомогою оператора `#!periwinkle жбурнути`. Цей оператор дозволяє вам явно кидати винятки у випадках, коли ваша програма стикається з умовами, які не можуть бути оброблені звичайним шляхом. Це корисно для сигналізації про помилки, які можуть виникнути через неправильний ввід або інші критичні умови.

``` periwinkle linenums="0"
жбурнути ПомилкаІмені("Повідомлення")
```

!!! info "Важливо"
    Якщо в оператор `#!periwinkle жбурнути` буде переданий об'єкт, який не є нащадком винятку, то буде викликаний виняток `#!periwinkle ПомилкаТипу`.

## Список винятків

| Ім'я                      | Опис  |
| ------------------------- | ----- |
| Виняток                   | Базовий клас для всіх винятків|
| ПомилкаІмені              | Виникає, коли ім'я змінної або функції не знайдено |
| ПомилкаТипу               | Виникає, коли операція або функція отримує аргумент невірного типу |
| ПомилкаРеалізації         | Виникає, коли реалізація функції або методу відсутня |
| ПомилкаАтрибуту           | Виникає, коли вказаний атрибут є відсутнім |
| ПомилкаІндексу            | Виникає, коли доступ до елемента масиву або колекції здійснюється за індексом, що виходить за межі допустимого діапазону |
| ПомилкаДіленняНаНуль      | Виникає, коли виконується операція ділення на нуль |
| ПомилкаЗначення           | Виникає, коли передане значення не відповідає очікуваному діапазону або форматам |
| ВнутрішняПомилка          | Виникає при неправильний роботі інтерпретатора, але помилка не є фатальною для завершення роботи |
